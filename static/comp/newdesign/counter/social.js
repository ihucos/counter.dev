// list taken here from https://influencermarketinghub.com/social-media-sites/
customElements.define(
    tagName(),
    class extends HTMLElement {
        draw(ref) {
            this.innerHTML = Object.entries(ref).reduce(
                (acc, next) =>
                acc + (this.isSocial(next[0]) ? next[1] : 0),
                0)
        }

        isSocial(ref){
            let match = this.topLevelDomainRe.exec(ref)
            if (match === null){return null}
            if (this.social.has(match[0])){console.log(match[0])}
            return this.social.has(match[0])
        }

        topLevelDomainRe = /[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{2,}|[-\w]+\.[-\w]{2})$/i

        social = new Set([
            "triller.co",
            "wt.social",
            "valence.community",
            "untappd.com",
            "periscope.tv",
            "elpha.com",
            "yubo.live",
            "peanut-app.io",
            "houseparty.com",
            "caffeine.tv",
            "steemit.com",
            "tieba.baidu.com",
            "23snaps.com",
            "likee.video",
            "8tracks.com",
            "academia.edu",
            "amikumu.com",
            "anobii.com",
            "asmallworld.com",
            "athlinks.com",
            "band.us",
            "bebee.com",
            "teamblind.com",
            "diasporafoundation.org",
            "fark.com",
            "mewe.com",
            "facebook.com",
            "instagram.com",
            "twitter.com",
            "tumblr.com",
            "linkedin.com",
            "whatsapp.com",
            "snapchat.com",
            "pinterest.com",
            "reddit.com",
            "youtube.com",
            "mix.com",
            "tagged.com",
            "nextdoor.com",
            "deviantart.com",
            "quora.com",
            "meetup.com",
            "reverbnation.com",
            "flixster.com",
            "goodreads.com",
            "twitch.tv",
            "caringbridge.org",
            "wattpad.com",
            "viadeo.com",
            "crunchyroll.com",
            "skyrock.com",
            "vk.com",
            "myheritage.com",
            "livejournal.com",
            "classmates.com",
            "soundcloud.com",
            "bubbly.net",
            "flickr.com",
            "weheartit.com",
            "influenster.com",
            "filmaffinity.com",
            "opendiary.com",
            "yelp.com",
            "collegehumor.com",
            "gaiaonline.com",
            "mocospace.com",
            "couchsurfing.com",
            "funnyordie.com",
            "italki.com",
            "etoro.com",
            "xing.com",
            "meetme.com",
            "ravelry.com",
            "care2.com",
            "yy.com",
            "vero.co",
            "medium.com",
            "giphy.com",
            "tribe.so",
            "qq.com",
            "wechat.com",
            "qzone.qq.com",
            "tiktok.com",
            "weibo.com",
            "kuaishou.com",
            "skype.com",
            "viber.com",
            "line.me",
            "lp.play.line.me",
            "swarmapp.com",
            "douban.com",
            "discord.com",
            "badoo.com",
            "myspace.com",
            "mixi.jp",
            "ravelry.com",
            "cellufun.com",
            "xanga.com",
            "imgur.com",
            "ello.co",
            "vimeo.com",

            // addedd manually.
            "indiehackers.com",
            "dev.to",
        ])
    }
);
